unbind C-b

# ─── Truecolor (24-bit) ──────────────────────────────────────
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"
set -ga terminal-overrides ",xterm*:Tc"

# Allow OSC 52 to pass through to terminal (remote clipboard sync)
set -g set-clipboard on
set -ga terminal-features ",*:clipboard"

set -g prefix C-n
bind C-n send-prefix

# Vi-style copy mode
set-window-option -g mode-keys vi

set -g status on
set -g status-bg white
set -g status-fg black
set -g status-left-length 40
set -g status-left "#(~/.tmux/scripts/host-icon.sh) [#S] "
set -g message-style "bg=white,fg=black"
set -g status-right "#{b:pane_current_path}"

# Pane borders - all black double-line
set -g pane-border-style fg=black
set -g pane-active-border-style fg=black
set -g pane-border-lines double

set -g display-panes-time 2000

# Dim inactive panes (disabled - conflicts with flash)
# set -g window-style 'bg=colour235'
# set -g window-active-style 'bg=default'

# Flash on pane switch - invert entire pane briefly
set-hook -g after-select-pane "run-shell \"tmux select-pane -t '#{pane_id}' -P 'bg=black,fg=white'; sleep 0.05; tmux select-pane -t '#{pane_id}' -P ''\""

# Session chooser
bind s choose-tree -s

# ─── Plugins (TPM) ───────────────────────────────────────────
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'laktak/extrakto'

# tmux-fzf settings
TMUX_FZF_LAUNCH_KEY="f"
TMUX_FZF_ORDER="session|window|pane|command|keybinding"

# ─── System Monitoring Status Bar ───────────────────────────
# Refresh every 5 seconds
set -g status-interval 5
set -g status-right-length 60

# Format: abbreviated_cwd | RAM/CPU | time
set -g status-right "#(~/.tmux/scripts/abbrev-path.sh '#{pane_current_path}') │ #(~/.tmux/scripts/status-sysinfo.sh) │ %H:%M"

# Initialize TPM (keep at bottom)
run '~/.tmux/plugins/tpm/tpm'
